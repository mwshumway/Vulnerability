function Counter = nondecreasing_counterexample_search(n)
%NONDECREASING_COUNTEREXAMPLE_SEARCH Search for counter examples to the
%vulnerability function being non-decreasing. 
%   Parameters:
%       n (int) : search on A matrices of size (n x n).
    A = randi([-5 5], n, n);  % nxn matrix with entries from [-5, 5]. Adjust range as desired.
    % The following code chooses n random entries of A to zero out.
    indices = randi([1, n^2], 1, n);
    [row_indices, col_indices] = ind2sub([n,n], indices);
    A(row_indices, col_indices) = 0;

    % now generate until the matrix is stable and the system is not
    % non-decreasing
    while is_stable(A) == 0 || determine_nondecreasing(A) == 0 
        A = randi([-5  5], n, n);
        indices = randi([1, n^2], 1, n+1);
        [row_indices, col_indices] = ind2sub([n,n], indices);
        A(row_indices, col_indices) = 0;
    end

    Counter = A;
end